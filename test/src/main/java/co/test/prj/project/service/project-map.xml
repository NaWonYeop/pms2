<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.test.prj.project.service.ProjectMapper">
			
	<select id="projectSelectList" resultType="co.test.prj.project.service.ProjectVO">
		SELECT * FROM PROJECT
	</select>
	
	<!-- 언제 보여줄꺼지? -->
	<select id="projectSelect" parameterType="co.test.prj.project.service.ProjectVO"
		resultType="co.test.prj.project.service.ProjectVO">
		
	</select>
	
	<select id="projectMaxPId" parameterType="co.test.prj.project.service.ProjectVO" resultType="int">
		SELECT NVL(MAX(PRJ_ID) + 1, 1) AS ID FROM PROJECT
	</select>

	<insert id="projectInsert" parameterType="co.test.prj.project.service.ProjectVO">
			INSERT INTO PROJECT(PRJ_ID, PRJ_NAME, PRJ_STR, PRJ_ED, PRJ_OFR_PROP, 
			PRJ_FND_PROP, PRJ_CNT, MASTER_ID, CTF_ID, PRJ_OFR_STR, PRJ_OFR_ED,
			PRJ_FRN_PRS, PRJ_BK_PRS, PRJ_DB_PRS, PRJ_SER_PRS, PRJ_CND, PRJ_AR,
			PRJ_FND_STR, PRJ_FND_ED, PRJ_GL_PRC)
			VALUES(#{prj_id}, #{prj_name}, #{prj_str}, #{prj_ed}, #{prj_ofr_prop}, 
			#{prj_fnd_prop}, #{prj_cnt}, #{master_id}, #{ctf_id}, #{prj_ofr_str}, #{prj_ofr_ed},
			#{prj_frn_prs}, #{prj_bk_prs}, #{prj_db_prs}, #{prj_ser_prs}, #{prj_cnd}, #{prj_ar},
			#{prj_fnd_str}, #{prj_fnd_ed}, #{prj_gl_prc})				
	</insert>
	
	<!-- 업데이트 지만 insert로 버전명 바꿔가면서 씀 -->
	<insert id="projectUpdate" parameterType="co.test.prj.project.service.ProjectVO">
	
	</insert>
	
	<delete id="projectDelete" parameterType="co.test.prj.project.service.ProjectVO">
	
	</delete>
	
	
	<!-- 구직상세 참여프로젝트 >>> 경일 -->
	<select id="jobJoinList" resultType="co.test.prj.project.service.ProjectVO">
		SELECT PRJ_NAME FROM PROJECT
		WHERE master_id = #{master_id} and SYSDATE <![CDATA[<]]> PRJ_OFR_ED
	</select>
	
	<!-- 구인현황 리스트 >>> 경일 -->
	<select id="ofterList" resultType="co.test.prj.user.service.UserVO">
		select u.user_name, u.user_crr, u.user_tel, app_stt
		from "user" u, application a
		where u.user_id in (select user_id from application where master_id=0 and prj_id = 0 ) and u.user_id=a.user_id;
	</select>
</mapper>